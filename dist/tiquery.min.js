/*
 * TiQuery Javascript Library for Titanium v0.0.1
 *
 * Copyright 2010 Eric Faerber, Natural Code Project
 * Released under GPL Version 2
 *
 * Includes large portions of jQuery
 * http://jquery.com
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(c,e,d){var b=(function(){var i=function(p){return new i.fn.init(p)},h=c.TiQuery,k=c.$,o=/\S/,j=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,f=Object.prototype.toString,g=Object.prototype.hasOwnProperty,l=Array.prototype.push,n=Array.prototype.slice,m=Array.prototype.indexOf;i.fn=i.prototype={init:function(p,q){if(!p){return this}this.context=this[0]=p;this.length=1;return this},size:function(){return this.length},toArray:function(){return n.call(this,0)},get:function(p){return p==null?this.toArray():(p<0?this.slice(p)[0]:this[p])},pushStack:function(q,s,p){var r=i();if(TiQueryuery.isArray(q)){l.apply(r,q)}else{i.merge(r,q)}r.prevObject=this;r.context=this.context;if(s==="find"){r.selector=this.selector+(this.selector?" ":"")+p}else{if(s){r.selector=this.selector+"."+s+"("+p+")"}}return r},each:function(q,p){return i.each(this,q,p)},ready:function(p){return this},eq:function(p){return p===-1?this.slice(p):this.slice(p,+p+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(n.apply(this,arguments),"slice",n.call(arguments).join(","))},map:function(p){return this.pushStack(i.map(this,function(r,q){return p.call(r,q,r)}))},end:function(){return this.prevObject||i(null)},push:l,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.fn.extend=i.extend=function(){var u=arguments[0]||{},t=1,s=arguments.length,w=false,x,r,p,q;if(typeof u==="boolean"){w=u;u=arguments[1]||{};t=2}if(typeof u!=="object"&&!i.isFunction(u)){u={}}if(s===t){u=this;--t}for(;t<s;t++){if((x=arguments[t])!=null){for(r in x){p=u[r];q=x[r];if(u===q){continue}if(w&&q&&(i.isPlainObject(q)||i.isArray(q))){var v=p&&(i.isPlainObject(p)||i.isArray(p))?p:i.isArray(q)?[]:{};u[r]=i.extend(w,v,q)}else{if(q!==d){u[r]=q}}}}}return u};i.extend({noConflict:function(p){c.$=k;if(p){c.TiQuery=h}return i},isFunction:function(p){return f.call(p)==="[object Function]"},isArray:function(p){return f.call(p)==="[object Array]"},isPlainObject:function(q){if(!q||f.call(q)!=="[object Object]"||q.nodeType||q.setInterval){return false}if(q.constructor&&!g.call(q,"constructor")&&!g.call(q.constructor.prototype,"isPrototypeOf")){return false}var p;for(p in q){}return p===d||g.call(q,p)},isEmptyObject:function(q){for(var p in q){return false}return true},error:function(p){throw p},parseJSON:function(p){if(typeof p!=="string"||!p){return null}p=i.trim(p);if(/^[\],:{}\s]*$/.test(p.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return JSON.parse(p)}else{i.error("Invalid JSON: "+p);return false}},noop:function(){},each:function(s,w,r){var q,t=0,u=s.length,p=u===d||i.isFunction(s);if(r){if(p){for(q in s){if(w.apply(s[q],r)===false){break}}}else{for(;t<u;){if(w.apply(s[t++],r)===false){break}}}}else{if(p){for(q in s){if(w.call(s[q],q,s[q])===false){break}}}else{for(var v=s[0];t<u&&w.call(v,t,v)!==false;v=s[++t]){}}}return s},trim:function(p){return(p||"").replace(j,"")},makeArray:function(r,q){var p=q||[];if(r!=null){if(r.length==null||typeof r==="string"||i.isFunction(r)||(typeof r!=="function"&&r.setInterval)){l.call(p,r)}else{i.merge(p,r)}}return p},inArray:function(r,s){if(s.indexOf){return s.indexOf(r)}for(var p=0,q=s.length;p<q;p++){if(s[p]===r){return p}}return -1},merge:function(t,r){var s=t.length,q=0;if(typeof r.length==="number"){for(var p=r.length;q<p;q++){t[s++]=r[q]}}else{while(r[q]!==d){t[s++]=r[q++]}}t.length=s;return t},grep:function(q,u,p){var r=[];for(var s=0,t=q.length;s<t;s++){if(!p!==!u(q[s],s)){r.push(q[s])}}return r},map:function(q,v,p){var r=[],u;for(var s=0,t=q.length;s<t;s++){u=v(q[s],s,p);if(u!=null){r[r.length]=u}}return r.concat.apply([],r)},clone:function(r,p){var q={};if(p==true){q=i.extend(true,{},r)}else{q=i.extend({},r)}return q},guid:1,proxy:function(r,q,p){if(arguments.length===2){if(typeof q==="string"){p=r;r=p[q];q=d}else{if(q&&!i.isFunction(q)){p=q;q=d}}}if(!q&&r){q=function(){return r.apply(p||this,arguments)}}if(r){q.guid=r.guid=r.guid||q.guid||i.guid++}return q}});return(c.TiQuery=c.$=i)})();function a(){return(new Date).getTime()}(function(h){h.fn.extend({registerEvent:function(i){h.fn[i]=function(k){if(k==null){return this.trigger(i)}else{return this.bind(i,k)}}},bind:function(k,i){this[0].addEventListener(k,i);return this},unbind:function(i){this[0].removeEventListener(i);return this},trigger:function(i){this[0].fireEvent(i);return this}});var g=["blur","cancel","click","dblclick","doubletap","focus","orientationchange","scroll","shake","singletap","swipe","touchcancel","touchend","touchmove","touchstart","twofingertap"];for(var f=0,j=g.length;f<j;f++){h.fn.registerEvent(g[f])}})(b);(function(h){h.extend({xhrSettings:{type:"get",data:"",dataType:"",timeout:3000,onError:null,onLoad:null,onDataStream:null,onReadyStateChange:null,onSendStream:null},xhr:function(i){var k=h.extend(true,{},h.xhrSettings,i);if(k.url==null){return false}k.type=k.type.toUpperCase();k.dataType=k.dataType.toUpperCase();var l=e.Network.createHTTPClient();l.ondatastream=k.onDataStream;l.onsendstream=k.onSendStream;l.onreadystatechange=k.onReadyStateChange;l.setTimeout(k.timeout);l.onload=function(n){e.API.debug("XHR complete");var m=false;if(k.dataType=="XML"){try{m=this.responseXML}catch(o){e.API.error(o);m=false}}else{if(k.dataType=="JSON"){m=h.parseJSON(this.responseText)}else{m=this.responseText}}if(h.isFunction(k.onLoad)){k.onLoad(m,l,n)}};l.onerror=function(m){e.API.error("XHR error: "+m.error);if(h.isFunction(k.onError)){k.onError(l,m)}};l.open(k.type,k.url);l.send(k.data);l=null;return true}});var f=["get","getJSON","getXML","post","postJSON","postXML"];for(var g=0,j=f.length;g<j;g++){(function(k){var l=(k.indexOf("get")!=-1)?"get":"post",i;if(k.indexOf("JSON")!=-1){i="JSON"}else{if(k.indexOf("XML")!=-1){i="XML"}}h[k]=function(m,o,n){if(h.isFunction(o)){n=o;o={}}this.xhr({type:l,url:m,data:o,dataType:i,onLoad:n})}})(f[g])}})(b);(function(j){j.extend({info:e.API.info,error:e.API.error,warn:e.API.warn,log:e.API.log,include:e.include,db:e.Database.open});var g={Contacts:["Group","Person"],Facebook:["LoginButton"],Filesystem:["File","TempDirectory","TempFile"],Map:["Annotation","MapView"],Media:["AudioPlayer","AudioRecorder","Item","MusicPlayer","Sound","VideoPlayer"],Network:["BonjourBrowser","BonjourService","HTTPClient","TCPSocket"],Platform:["UUID"],UI:["2DMatrix","3DMatrix","ActivityIndicator","AlertDialog","Animation","Button","ButtonBar","CoverFlowView","DashboardItem","DashboardView","EmailDialog","ImageView","Label","OptionDialog","Picker","PickerColumn","PickerRow","ProgressBar","ScrollView","ScrollableView","SearchBar","Slider","Switch","Tab","TabGroup","TabbedBar","TableView","TableViewRow","TableViewSection","TextArea","TextField","Toolbar","View","WebView","Window"]};for(var h in g){for(var f=0,k=g[h].length;f<k;f++){(function(i){j[i]=function(l){return e[h]["create"+i](l)}})(g[h][f])}}})(b)})(this,Titanium);